// Vars

@import "compass";
@import "breakpoint";

$breakpoint-to-ems: true;

$bp-sm:               500px;
$bp-med:              800px;
$bp-lrg:              1100px;


$white:             hsl(0, 0, 100%);
$med-grey:          hsl(0, 0, 40%);
$light-grey:        hsl(0, 0, 60%);

$primary-color:     $med-grey;
$secondary-color:   $white;
$tertiary-color:    $light-grey;


$gutter: .5em;


@mixin aspect-ratio($width, $percent-height) {
  max-width: 100%;
  max-height: $width * $percent-height;
}

@mixin aspect-ratio-breakpoint($width, $percent-height) {
  @include breakpoint($width) {
    @include aspect-ratio($width, $percent-height);
  }
}

$tv-ratio:                .75;
$default-aspect-ratio:    $tv-ratio;

// Base

@import "reset";

body {
  background: $secondary-color;
  font-family: Georgia, Times, "Times New Roman", serif;
  font-size: 14px;
  color: $primary-color;

  @include breakpoint($bp-sm) {
    font-size: 16px;
  }

  @include breakpoint($bp-med) {
    font-size: 18px;
  }

  @include breakpoint($bp-lrg) {
    font-size: 20px;
  }
}

%side-scroll {
  overflow: hidden;
  overflow-x: auto;
  white-space: nowrap;
}

.slides {
  @extend %side-scroll;
  margin: 0 $gutter $gutter;
  overflow: hidden;
}

.slide {
  display: inline-block;
  width: 100%;
  height: auto;
  padding-top: $gutter;
  vertical-align: top;
  text-align: center;

  @include breakpoint($bp-lrg) {
    padding-top: $gutter * 4;
  }

  img {
    max-width: 100%;
    max-height: 100%;
    height: auto;

    @for $i from 30 to 40 {
      @include aspect-ratio-breakpoint(10px * $i, $default-aspect-ratio);
    }

    @for $i from 8 through 24 {
      @include aspect-ratio-breakpoint(50px * $i, $default-aspect-ratio);
    }
  }

  figcaption {
    text-align: left;
    white-space: normal;
  }
  .attribution {
    font-size: .8em;
    color: $tertiary-color;
  }
}

.thumbs {
  position: relative;
  @extend %side-scroll;
  padding-right: $gutter/2;
  margin-bottom: $gutter;
  z-index: 5;
}

.thumb {
  position: relative;
  display: inline-block;
  margin-right: $gutter/2;

  &:first-child {
    margin-left: $gutter;
  }

  img {
    height: 4em;
    width: auto;

    @include breakpoint($bp-sm) {
      height: 5em;
    }

    @include breakpoint($bp-med) {
      height: 6em;
    }

    @include breakpoint($bp-lrg) {
      height: 7em;
    }

  }

  .mask {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparentize($secondary-color, .7);
    @include transition();

    &:hover,
    &:active {
      background: none;
    }
  }
}

.image-gallery {
  max-width: $bp-lrg;
  margin: auto;
  position: relative;

  &:before {
    position: absolute;
    left: 0;
    top: 0;
    width: $gutter;
    height: 100%;
    @include background-image(linear-gradient(left, transparentize($secondary-color, .2), transparentize($secondary-color, 1)));
    content: "";
    z-index: 10;
  }

  &:after {
    position: absolute;
    right: 0;
    top: 0;
    width: $gutter;
    height: 100%;
    @include background-image(linear-gradient(right, transparentize($secondary-color, .2), transparentize($secondary-color, 1)));
    content: "";
    z-index: 10;
  }
}

.page-title {
  font-style: italic;
  font-size: 1.5em;
  margin: 0 $gutter;
}